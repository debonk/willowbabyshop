<modification>
	<id>Different Email for Order Report</id>
	<version>1.0</version>
	<vqmver>2.5.1</vqmver>
	<author>Bonk</author>

	<file name="admin/view/template/setting/setting.tpl">
        <operation>
            <search position="after"><![CDATA[
				<div class="text-danger"><?php echo $error_email; ?></div>
			]]></search>
            <add><![CDATA[
				  <?php } ?>
                </div>
              </div>
			  <!--Bonk:1-->
              <div class="form-group">
                <label class="col-sm-2 control-label" for="input-email_2"><?php echo $entry_email_2; ?></label>
                <div class="col-sm-10">
                  <input type="text" name="config_email_2" value="<?php echo $config_email_2; ?>" placeholder="<?php echo $entry_email_2; ?>" id="input-email_2" class="form-control" />
                  <?php if ($error_email_2) { ?>
                  <div class="text-danger"><?php echo $error_email_2; ?></div>			
            ]]></add>
        </operation>
	</file>

	<file name="admin/controller/setting/setting.php">
        <operation>
            <search position="after"><![CDATA[
				$data['entry_email'] = $this->language->get('entry_email');
			]]></search>
            <add><![CDATA[
				$data['entry_email_2'] = $this->language->get('entry_email_2'); //Bonk:2
            ]]></add>
        </operation>
        <operation>
            <search position="before"><![CDATA[
				if (isset($this->error['telephone'])) {
			]]></search>
            <add><![CDATA[
				//Bonk:3
				if (isset($this->error['email_2'])) {
					$data['error_email_2'] = $this->error['email_2'];
				} else {
					$data['error_email_2'] = '';
				}
            ]]></add>
        </operation>
        <operation>
            <search position="before"><![CDATA[
				if (isset($this->request->post['config_telephone'])) {
			]]></search>
            <add><![CDATA[
				//Bonk:4
				if (isset($this->request->post['config_email_2'])) {
					$data['config_email_2'] = $this->request->post['config_email_2'];
				} else {
					$data['config_email_2'] = $this->config->get('config_email_2');
				}
				if ($this->config->get('config_email_2') == "") {
					$data['config_email_2'] = $data['config_email'];
				}
            ]]></add>
        </operation>
        <operation>
            <search position="before"><![CDATA[
				if ((utf8_strlen($this->request->post['config_telephone']) < 3)
			]]></search>
            <add><![CDATA[
				//Bonk:5
				if (!$this->request->post['config_email_2'] == "") {
					if ((utf8_strlen($this->request->post['config_email_2']) > 96) || !filter_var($this->request->post['config_email_2'], FILTER_VALIDATE_EMAIL)) {
						$this->error['email_2'] = $this->language->get('error_email_2');
					}
				}
            ]]></add>
        </operation>
	</file>

	<file name="admin/language/en-gb/setting/setting.php">
        <operation>
            <search position="before"><![CDATA[
				$_['entry_telephone']
			]]></search>
            <add><![CDATA[
				$_['entry_email_2']                     = 'Order E-Mail';//Bonk:6
            ]]></add>
        </operation>
        <operation>
            <search position="before"><![CDATA[
				$_['error_telephone']
			]]></search>
            <add><![CDATA[
				$_['error_email_2']                     = 'E-Mail Address does not appear to be valid!';//Bonk:7
            ]]></add>
        </operation>
	</file>
	
	<file name="catalog/model/checkout/order.php">
        <operation>
            <search position="replace" index="1,2,3"><![CDATA[
				$mail->setFrom($this->config->get('config_email'));
			]]></search>
            <add><![CDATA[
				$mail->setFrom($this->config->get('config_email_2')); //Bonk:8
            ]]></add>
        </operation>
        <operation>
            <search position="replace"><![CDATA[
				$mail->setTo($this->config->get('config_email'));
			]]></search>
            <add><![CDATA[
				$mail->setTo($this->config->get('config_email_2')); //Bonk:9
            ]]></add>
        </operation>
	</file>
	
</modification>